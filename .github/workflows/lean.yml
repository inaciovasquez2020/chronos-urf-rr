- name: Install elan
  run: |
    curl -sSf https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh | sh -s -- -y
    echo "$HOME/.elan/bin" >> $GITHUB_PATH

- name: Verify Lean toolchain
  run: |
    cat lean-toolchain
    lean --version
    lake --version

- name: Disable git submodule recursion (Lake packages are not submodules)
  run: |
    git config --global submodule.recurse false

- name: Build (disable mathlib cache)
  env:
    MATHLIB_CACHE: "0"
  run: |
    lake update
    lake build

